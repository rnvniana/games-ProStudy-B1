<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>English for Medical Students</title>
    <style>
        :root { 
            --primary: #0ea5e9; 
            --success: #10b981; 
            --error: #f43f5e; 
            --bg: #f0f9ff; 
            --dark: #0c4a6e;
        }
        
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: var(--bg); 
            margin: 0; 
            padding: 15px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            color: #334155;
        }

        .card { 
            background: white; 
            padding: 1.5rem; 
            border-radius: 1rem; 
            box-shadow: 0 4px 15px rgba(14, 165, 233, 0.1); 
            max-width: 650px; 
            width: 100%; 
            border-top: 8px solid var(--primary); 
            margin-bottom: 20px;
            box-sizing: border-box;
        }
        
        h1, h2 { color: var(--dark); text-align: center; margin-bottom: 15px; }
        
        .score-box { 
            position: sticky; 
            top: 10px; 
            background: var(--primary); 
            color: white; 
            padding: 12px 25px; 
            border-radius: 50px; 
            text-align: center; 
            font-weight: bold; 
            z-index: 100; 
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* –ë–ª–æ–∫ —Å —Ç–µ–∫—Å—Ç–æ–º –∑–∞–¥–∞–Ω–∏—è */
        .reading-passage {
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            border-left: 5px solid var(--primary);
            line-height: 1.7;
            margin-bottom: 20px;
            font-size: 0.95rem;
            color: #475569;
        }

        .q-row { 
            background: #f8fafc; 
            padding: 15px; 
            border-radius: 12px; 
            border: 1px solid #e2e8f0; 
            margin-bottom: 12px; 
            line-height: 2.2; 
        }

        .input-gap { 
            border: none; 
            border-bottom: 2px solid var(--primary); 
            background: transparent; 
            padding: 2px 5px; 
            font-size: 1rem; 
            font-weight: bold; 
            color: var(--dark); 
            outline: none; 
            text-align: center; 
            width: 110px; 
        }

        .input-gap.correct { color: var(--success); border-color: var(--success); }
        .input-gap.wrong { color: var(--error); border-color: var(--error); }

        .tf-row { display: flex; justify-content: space-between; align-items: center; background: white; padding: 10px; border-radius: 8px; border: 1px solid #e0f2fe; margin-bottom: 8px; }
        .btn-tf { padding: 8px 15px; border: 1px solid #bae6fd; background: white; border-radius: 8px; cursor: pointer; color: var(--primary); font-weight: bold; margin-left: 5px; }
        .btn-tf.selected-correct { background: var(--success) !important; color: white !important; border-color: var(--success) !important; }
        .btn-tf.selected-wrong { background: var(--error) !important; color: white !important; border-color: var(--error) !important; }
        .btn-tf.not-selected { opacity: 0.3; }

        #final-section { display: none; text-align: center; margin-top: 20px; padding: 20px; background: #e0f2fe; border-radius: 15px; width: 100%; max-width: 650px; }
        .save-btn { padding: 12px 25px; background: var(--primary); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

    <div class="score-box">Score: <span id="score">0</span> / 140</div>

    <div class="card">
        <h2>Task 1: Reading Comprehension</h2>
        
        <div class="reading-passage">
            <strong>What makes a good language learner?</strong><br>
            Many studies ask this question. There are some things that good language learners do and some things they don't do. 
            Don't be afraid of making mistakes. Good language learners notice their mistakes and learn from them. 
            Do group activities and talk with other students. Make notes during every class to help you remember. 
            Use a dictionary to check the meaning of words. Think in the language outside the classroom. 
            Do extra practice online and enjoy the process. Watch films, listen to songs, and play games. 
            It's never too late to become a good learner!
        </div>

        <div id="tf-container"></div>
    </div>

    <div class="card">
        <h2>Task 2: Present Simple Writing</h2>
        <div id="writing-container"></div>
    </div>

    <div id="final-section">
        <h3>Lesson Completed! üéì</h3>
        <input type="text" id="student-name" placeholder="Student Name" style="padding:10px; border-radius:8px; width:60%; margin-bottom:10px;"><br>
        <button class="save-btn" onclick="saveResult()">Save Score</button>
        <div id="lb" style="margin-top:20px; display:none;"><table id="lb-table" style="width:100%"></table></div>
    </div>

<script>
    let score = 0;
    let tfCount = 0;
    let writeCount = 0;

    const tfData = [
        { q: "1. Good language learners don't make mistakes.", a: "False" },
        { q: "2. It's a good idea to talk with other students.", a: "True" },
        { q: "3. Take notes only before an exam.", a: "False" },
        { q: "4. Good learners write down words they learn.", a: "True" },
        { q: "5. Think of language when you are outside class.", a: "True" },
        { q: "6. Don't take tests outside of class.", a: "False" }
    ];

    const writeData = [
        { q: "1. What time ______ he ______ work? (START)", a: [["does"], ["start"]] },
        { q: "2. We ______ to the same place on holiday. (GO)", a: [["go"]] },
        { q: "3. My sister ______ ______ chocolate. (NOT LIKE)", a: [["doesn't", "doesn‚Äôt", "doesn‚Äòt"], ["like"]] },
        { q: "4. ______ they ______ a lot of sport? (DO)", a: [["do"], ["do"]] },
        { q: "5. I ______ ______ meals very often. (NOT COOK)", a: [["don't", "don‚Äôt", "don‚Äòt"], ["cook"]] },
        { q: "6. Why ______ cats ______ all the time? (SLEEP)", a: [["do"], ["sleep"]] },
        { q: "7. He ______ to different countries. (FLY)", a: [["flies"]] },
        { q: "8. ______ you ______ this question? (UNDERSTAND)", a: [["do"], ["understand"]] }
    ];

    // Build Task 1
    const tfCont = document.getElementById('tf-container');
    tfData.forEach((item, idx) => {
        const row = document.createElement('div');
        row.className = 'tf-row';
        row.innerHTML = `<span>${item.q}</span><div class="btns"></div>`;
        const btnBox = row.querySelector('.btns');
        ["True", "False"].forEach(choice => {
            const btn = document.createElement('button');
            btn.className = 'btn-tf'; btn.innerText = choice;
            btn.onclick = () => {
                if (row.dataset.done) return;
                row.dataset.done = "true";
                if (choice === item.a) { btn.classList.add('selected-correct'); score += 10; }
                else { btn.classList.add('selected-wrong'); }
                btnBox.querySelectorAll('.btn-tf').forEach(b => { if(!b.classList.contains('selected-correct') && !b.classList.contains('selected-wrong')) b.classList.add('not-selected'); });
                tfCount++; checkEnd();
            };
            btnBox.appendChild(btn);
        });
        tfCont.appendChild(row);
    });

    // Build Task 2
    const wCont = document.getElementById('writing-container');
    writeData.forEach((item) => {
        const row = document.createElement('div');
        row.className = 'q-row';
        let html = item.q;
        item.a.forEach(ansArray => {
            html = html.replace("______", `<input type="text" class="input-gap" data-ans="${ansArray.join('|')}">`);
        });
        row.innerHTML = html;
        wCont.appendChild(row);

        const inputs = row.querySelectorAll('.input-gap');
        inputs.forEach(input => {
            input.oninput = () => {
                const val = input.value.toLowerCase().trim();
                const possible = input.dataset.ans.split('|');
                if (possible.includes(val)) {
                    input.classList.add('correct');
                    input.disabled = true;
                    score += 10;
                    if (Array.from(inputs).every(i => i.disabled)) { writeCount++; checkEnd(); }
                }
                document.getElementById('score').innerText = score;
            };
        });
    });

    function checkEnd() {
        document.getElementById('score').innerText = score;
        if (tfCount === 6 && writeCount === 8) {
            document.getElementById('final-section').style.display = 'block';
        }
    }

    function saveResult() {
        const name = document.getElementById('student-name').value || "Student";
        const results = JSON.parse(localStorage.getItem('med_final_v5')) || [];
        results.push({name, score});
        results.sort((a,b) => b.score - a.score);
        localStorage.setItem('med_final_v5', JSON.stringify(results.slice(0,5)));
        document.getElementById('lb').style.display = 'block';
        document.getElementById('lb-table').innerHTML = results.map(r => `<tr><td>${r.name}</td><td style="text-align:right"><b>${r.score}</b></td></tr>`).join('');
    }
</script>
</body>
</html>